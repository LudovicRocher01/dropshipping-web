<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RÃ©capitulatif de Commande</title>
  <!-- Lien vers Google Fonts pour une typographie moderne -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="recapStyles.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="../index.html" class="logo">ðŸŒ¿ Osteozen</a>
    </div>
  </nav>
  <main class="container main-content">
    <h1 id="remerciement">Merci pour votre commande !</h1>
    <div id="recap">
      <!-- Le rÃ©capitulatif de la commande s'affichera ici -->
    </div>
  </main>
  <script>
    // RÃ©cupÃ©rer les informations du client et de la commande depuis sessionStorage
// ðŸ“Œ RÃ©cupÃ©rer les informations de la commande depuis sessionStorage
const clientData = JSON.parse(sessionStorage.getItem("orderClient"));
const produits = JSON.parse(sessionStorage.getItem("orderProduits"));
const total = sessionStorage.getItem("orderTotal");

// ðŸ“Œ VÃ©rifier si l'utilisateur a choisi "Retrait au cabinet"
const adresseAffichee = clientData.adresse === "Retrait au cabinet" ? "Retrait au cabinet" : clientData.adresse;

// ðŸ“Œ Mettre Ã  jour le message de remerciement avec le prÃ©nom et le nom
if (clientData) {
    document.getElementById("remerciement").textContent = `Merci ${clientData.prenom} ${clientData.nom} pour votre commande !`;
    const recapDiv = document.getElementById("recap");

    recapDiv.innerHTML += `<p>Email : ${clientData.email}</p>`;
    recapDiv.innerHTML += `<p>Adresse : ${adresseAffichee}</p>`;
}

// ðŸ“Œ Afficher le rÃ©capitulatif des produits commandÃ©s
const recapDiv = document.getElementById("recap");
if (produits && produits.length > 0) {
    let html = `<h2>DÃ©tail de la commande :</h2>`;
    html += `<ul class="produits-list">`;
    produits.forEach(produit => {
        html += `<li class="produit-item">
                    <img src="${produit.image}" alt="${produit.nom}" class="produit-img">
                    <div class="produit-details">
                      <strong>${produit.nom}</strong>
                      <p>QuantitÃ© : ${produit.quantite}</p>
                      <p>Prix unitaire : ${parseFloat(produit.prix).toFixed(2)} â‚¬</p>
                    </div>
                 </li>`;
    });
    html += `</ul>`;
    html += `<div class="delivery-info">
                <h3>Mode de livraison :</h3>
                <p>${adresseAffichee}</p>
             </div>`;
    html += `<div class="total-info">
                <h3>Total payÃ© :</h3>
                <p>${parseFloat(total).toFixed(2)} â‚¬</p>
             </div>`;
    recapDiv.innerHTML = html;
} else {
    recapDiv.innerHTML = "<p>Aucune donnÃ©e de commande trouvÃ©e.</p>";
}


    document.addEventListener("DOMContentLoaded", () => {
    const client = JSON.parse(sessionStorage.getItem("orderClient"));
    const produits = JSON.parse(sessionStorage.getItem("orderProduits"));
    const total = sessionStorage.getItem("orderTotal");
    const transactionId = sessionStorage.getItem("orderTransactionId");

    if (client) {
        document.getElementById("remerciement").textContent = `Merci ${client.prenom} ${client.nom} pour votre commande !`;
        document.getElementById("recap").innerHTML = `
            <p>Email : ${client.email}</p>
            <p>Adresse : ${client.adresse}</p>
            <p>Transaction ID : <strong>${transactionId}</strong></p>
            <h2>DÃ©tail de la commande :</h2>
            <ul class="produits-list">
                ${produits.map(p => `
                    <li class="produit-item">
                        <img src="${p.image}" alt="${p.nom}" class="produit-img">
                        <div class="produit-details">
                            <strong>${p.nom}</strong>
                            <p>QuantitÃ© : ${p.quantite}</p>
                            <p>Prix unitaire : ${parseFloat(p.prix).toFixed(2)} â‚¬</p>
                        </div>
                    </li>
                `).join('')}
            </ul>
            <h3>Total payÃ© : ${parseFloat(total).toFixed(2)} â‚¬</h3>
        `;
    }
});


setTimeout(() => sessionStorage.clear(), 5000); // Efface aprÃ¨s 5 sec

  </script>
</body>
</html>
