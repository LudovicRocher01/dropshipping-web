<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>R√©capitulatif de Commande</title>
  <!-- Lien vers Google Fonts pour une typographie moderne -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="recapStyles.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="../index.html" class="logo">üöÄ Osteozen</a>
    </div>
  </nav>
  <main class="container main-content">
    <h1 id="remerciement">Merci pour votre commande !</h1>
    <div id="recap">
      <!-- Le r√©capitulatif de la commande s'affichera ici -->
    </div>
  </main>
  <script>
    // R√©cup√©rer les informations du client et de la commande depuis sessionStorage
    const clientData = JSON.parse(sessionStorage.getItem("orderClient"));
    const produits = JSON.parse(sessionStorage.getItem("orderProduits"));
    const total = sessionStorage.getItem("orderTotal");

    // Mettre √† jour le message de remerciement avec le pr√©nom et le nom

  if (clientData) {
      document.getElementById("remerciement").textContent = `Merci ${clientData.prenom} ${clientData.nom} pour votre commande !`;
      const recapDiv = document.getElementById("recap");
    
      recapDiv.innerHTML += `<p>Email : ${clientData.email}</p>`;
      recapDiv.innerHTML += `<p>Adresse : ${clientData.adresse === "Retrait au cabinet" ? "Retrait au cabinet" : clientData.adresse}</p>`;
  }


    // Afficher le r√©capitulatif de la commande
    const recapDiv = document.getElementById("recap");
    if (produits && produits.length > 0) {
      let html = `<h2>D√©tail de la commande :</h2>`;
      html += `<ul class="produits-list">`;
      produits.forEach(produit => {
        html += `<li class="produit-item">
                    <img src="${produit.image}" alt="${produit.nom}" class="produit-img">
                    <div class="produit-details">
                      <strong>${produit.nom}</strong>
                      <p>Quantit√© : ${produit.quantite}</p>
                      <p>Prix unitaire : ${parseFloat(produit.prix).toFixed(2)} ‚Ç¨</p>
                    </div>
                 </li>`;
      });
      html += `</ul>`;
      html += `<div class="delivery-info">
                 <h3>Adresse de livraison :</h3>
                 <p>${clientData.adresse}</p>
               </div>`;
      html += `<div class="total-info">
                 <h3>Total pay√© :</h3>
                 <p>${parseFloat(total).toFixed(2)} ‚Ç¨</p>
               </div>`;
      html += `<div class="email-info">
                 <h3>Email de confirmation envoy√© √† :</h3>
                 <p>${clientData.email}</p>
               </div>`;
      recapDiv.innerHTML = html;
    } else {
      recapDiv.innerHTML = "<p>Aucune donn√©e de commande trouv√©e.</p>";
    }
  </script>
</body>
</html>
